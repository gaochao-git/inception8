[mysqld]
# ---- Server ----
basedir                         = /Users/gaochao/work/git_repo/mysql-server/inception_binary
port                            = 3307
socket                          = /Users/gaochao/work/git_repo/mysql-server/inception_data/tmp/inception.sock
pid-file                        = /Users/gaochao/work/git_repo/mysql-server/inception_data/tmp/inception.pid
bind-address                    = 0.0.0.0
character-set-server            = utf8mb4
require-secure-transport        = OFF
log-error                       = /Users/gaochao/work/git_repo/mysql-server/inception_data/logs/inception_error.log
datadir                         = /Users/gaochao/work/git_repo/mysql-server/inception_data/data

# ===========================================================================
# Inception Audit Rules (OFF / WARNING / ERROR)
# ===========================================================================

# ---- 库级别 ----
inception_check_drop_database            = ERROR

# ---- 表级别 ----
inception_check_primary_key              = ERROR
inception_check_table_comment            = ERROR
inception_check_engine_innodb            = ERROR
inception_check_create_select            = OFF
inception_check_partition                = WARNING
inception_check_autoincrement            = WARNING
inception_check_autoincrement_init_value = WARNING
inception_check_autoincrement_name       = OFF
inception_check_drop_table               = WARNING
inception_check_truncate_table           = WARNING
inception_check_merge_alter_table        = WARNING
inception_check_varchar_shrink           = WARNING
inception_check_lossy_type_change        = WARNING
inception_check_decimal_change           = OFF
inception_check_max_columns              = 0

# ---- 列级别 ----
inception_check_column_comment           = ERROR
inception_check_nullable                 = WARNING
inception_check_not_null_default         = OFF
inception_check_column_default_value     = OFF
inception_check_blob_type                = OFF
inception_check_enum_type                = OFF
inception_check_set_type                 = OFF
inception_check_bit_type                 = OFF
inception_check_json_type                = OFF
inception_check_json_blob_text_default   = ERROR
inception_check_timestamp_default        = WARNING
inception_check_column_charset           = OFF
inception_check_max_char_length          = 64
inception_check_max_column_name_length   = 64

# ---- 索引级别 ----
inception_check_index_prefix             = WARNING
inception_check_foreign_key              = OFF
inception_check_duplicate_index          = WARNING
inception_check_max_indexes              = 16
inception_check_max_index_parts          = 5
inception_check_max_primary_key_parts    = 5
inception_check_index_length             = WARNING
inception_check_index_column_max_bytes   = 767
inception_check_index_total_max_bytes    = 3072

# ---- 命名规范 ----
inception_check_identifier               = OFF
inception_check_identifier_keyword       = OFF
inception_check_max_table_name_length    = 64

# ---- DML ----
inception_check_delete                   = WARNING
inception_check_dml_where                = ERROR
inception_check_dml_limit                = OFF
inception_check_insert_column            = ERROR
inception_check_insert_values_match      = ERROR
inception_check_insert_duplicate_column  = ERROR
inception_check_column_exists            = ERROR      # INSERT/UPDATE 引用的列必须存在于远程表
inception_check_select_star              = OFF
inception_check_orderby_in_dml           = WARNING
inception_check_orderby_rand             = WARNING
inception_check_max_update_rows          = 10000
inception_check_in_count                 = 0

# ---- TiDB 专用规则 ----
inception_check_tidb_merge_alter        = ERROR
inception_check_tidb_varchar_shrink     = ERROR
inception_check_tidb_decimal_change     = ERROR
inception_check_tidb_lossy_type_change  = ERROR
inception_check_tidb_foreign_key        = ERROR

# ===========================================================================
# Inception Options
# ===========================================================================

# ---- 执行前环境预检查 / 限流 ----
inception_exec_check_read_only = ON      # EXECUTE 前检查目标库 @@global.read_only，命中即阻断
inception_exec_max_threads_running = 0   # 目标库 Threads_running 上限（0=不检查）
inception_exec_max_replication_delay = 0 # 从库复制延迟秒数上限（0=不检查）

inception_osc_on              = OFF
inception_osc_bin_dir         = /usr/bin
inception_support_charset     = utf8,utf8mb4
inception_check_must_have_columns        = ERROR      # 必须包含的列检查级别（OFF/WARNING/ERROR）
inception_must_have_columns   = id BIGINT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT;create_time DATETIME NOT NULL COMMENT;update_time NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT
inception_audit_log           = /Users/gaochao/work/git_repo/mysql-server/inception_data/logs/inception_audit.log

# ===========================================================================
# Inception Connection Defaults
# ===========================================================================

inception_user                 = gaochao
inception_password_encrypt_key = inception8_secret_key
inception_password             = "AES:czbchvzWURzUisOHZJFKLw=="
